C51 COMPILER V8.02   KEY                                                                   08/27/2008 15:24:54 PAGE 1   


C51 COMPILER V8.02, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN key.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE key.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //=====================================================================
   2          //                         4*4键盘扫描程序
   3          //硬件连接: 4*4键盘的8个引脚接51的P1口
   4          //扫描返回值为0―15       
   5          //=====================================================================
   6          
   7          #include <STC89C51RC.h>      //STC单片机头文件
   8          
   9          #define uchar unsigned char
  10          
  11          uchar Key_Get(void)
  12          {
  13   1          uchar temp;
  14   1              uchar a;
  15   1      
  16   1          a=0xff;
  17   1          P1=0xfe;
  18   1              temp=P1&0xf0;
  19   1              if(temp==0xe0) while(temp==0xe0){ P1=0xfe;temp=P1&0xf0; a=0x00; }
  20   1              if(temp==0xd0) while(temp==0xd0){ P1=0xfe;temp=P1&0xf0; a=0x04; }
  21   1              if(temp==0xb0) while(temp==0xb0){ P1=0xfe;temp=P1&0xf0; a=0x08; }
  22   1              if(temp==0x70) while(temp==0x70){ P1=0xfe;temp=P1&0xf0; a=0x0c; }
  23   1      
  24   1              P1=0xfd;
  25   1              temp=P1&0xf0;
  26   1              if(temp==0xe0) while(temp==0xe0){ P1=0xfd;temp=P1&0xf0; a=0x01; }
  27   1              if(temp==0xd0) while(temp==0xd0){ P1=0xfd;temp=P1&0xf0; a=0x05; }
  28   1              if(temp==0xb0) while(temp==0xb0){ P1=0xfd;temp=P1&0xf0; a=0x09; }
  29   1              if(temp==0x70) while(temp==0x70){ P1=0xfd;temp=P1&0xf0; a=0x0d; }
  30   1              
  31   1              P1=0xfb;
  32   1              temp=P1&0xf0;  
  33   1              if(temp==0xe0) while(temp==0xe0){ P1=0xfb;temp=P1&0xf0; a=0x02; }
  34   1              if(temp==0xd0) while(temp==0xd0){ P1=0xfb;temp=P1&0xf0; a=0x06; }
  35   1              if(temp==0xb0) while(temp==0xb0){ P1=0xfb;temp=P1&0xf0; a=0x0a; }
  36   1              if(temp==0x70) while(temp==0x70){ P1=0xfb;temp=P1&0xf0; a=0x0e; }
  37   1      
  38   1              P1=0xf7;
  39   1              temp=P1&0xf0;
  40   1              if(temp==0xe0) while(temp==0xe0){ P1=0xf7;temp=P1&0xf0; a=0x03; }
  41   1              if(temp==0xd0) while(temp==0xd0){ P1=0xf7;temp=P1&0xf0; a=0x07; }
  42   1              if(temp==0xb0) while(temp==0xb0){ P1=0xf7;temp=P1&0xf0; a=0x0b; }
  43   1              if(temp==0x70) while(temp==0x70){ P1=0xf7;temp=P1&0xf0; a=0x0f; }
  44   1              
  45   1              return(a);    
  46   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    323    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V8.02   KEY                                                                   08/27/2008 15:24:54 PAGE 2   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
